(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mod.socket.io-parser"],{8205:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=r("7297"),o=r("a8a8"),c=r("ca65"),s=r("34eb")("socket.io-parser");var i;e.protocol=5,function(t){t[t["CONNECT"]=0]="CONNECT",t[t["DISCONNECT"]=1]="DISCONNECT",t[t["EVENT"]=2]="EVENT",t[t["ACK"]=3]="ACK",t[t["CONNECT_ERROR"]=4]="CONNECT_ERROR",t[t["BINARY_EVENT"]=5]="BINARY_EVENT",t[t["BINARY_ACK"]=6]="BINARY_ACK"}(i=e.PacketType||(e.PacketType={}));class a{encode(t){return s("encoding packet %j",t),t.type!==i.EVENT&&t.type!==i.ACK||!c.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===i.EVENT?i.BINARY_EVENT:i.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==i.BINARY_EVENT&&t.type!==i.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),s("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=o.deconstructPacket(t),r=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(r),n}}e.Encoder=a;class u extends n{constructor(){super()}add(t){let e;if("string"===typeof t)e=this.decodeString(t),e.type===i.BINARY_EVENT||e.type===i.BINARY_ACK?(this.reconstructor=new d(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!c.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const r={type:Number(t.charAt(0))};if(void 0===i[r.type])throw new Error("unknown packet type "+r.type);if(r.type===i.BINARY_EVENT||r.type===i.BINARY_ACK){const n=e+1;while("-"!==t.charAt(++e)&&e!=t.length);const o=t.substring(n,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(e+1)){const n=e+1;while(++e){const r=t.charAt(e);if(","===r)break;if(e===t.length)break}r.nsp=t.substring(n,e)}else r.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;while(++e){const r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=f(t.substr(e));if(!u.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return s("decoded %s as %j",t,r),r}static isPayloadValid(t,e){switch(t){case i.CONNECT:return"object"===typeof e;case i.DISCONNECT:return void 0===e;case i.CONNECT_ERROR:return"string"===typeof e||"object"===typeof e;case i.EVENT:case i.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case i.ACK:case i.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function f(t){try{return JSON.parse(t)}catch(e){return!1}}e.Decoder=u;class d{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},a8a8:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const n=r("ca65");function o(t){const e=[],r=t.data,n=t;return n.data=c(r,e),n.attachments=e.length,{packet:n,buffers:e}}function c(t,e){if(!t)return t;if(n.isBinary(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=c(t[n],e);return r}if("object"===typeof t&&!(t instanceof Date)){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=c(t[n],e));return r}return t}function s(t,e){return t.data=i(t.data,e),t.attachments=void 0,t}function i(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=i(t[r],e);else if("object"===typeof t)for(const r in t)t.hasOwnProperty(r)&&(t[r]=i(t[r],e));return t}e.deconstructPacket=o,e.reconstructPacket=s},ca65:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"===typeof ArrayBuffer,o=t=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,c=Object.prototype.toString,s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===c.call(Blob),i="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===c.call(File);function a(t){return n&&(t instanceof ArrayBuffer||o(t))||s&&t instanceof Blob||i&&t instanceof File}function u(t,e){if(!t||"object"!==typeof t)return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(u(t[e]))return!0;return!1}if(a(t))return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return u(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&u(t[r]))return!0;return!1}e.isBinary=a,e.hasBinary=u}}]);